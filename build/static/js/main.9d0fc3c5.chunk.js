(this["webpackJsonphackernews-react-apollo"]=this["webpackJsonphackernews-react-apollo"]||[]).push([[0],{56:function(e,n,t){},65:function(e,n,t){"use strict";t.r(n);var a,c,r,s,i=t(1),l=t(42),o=t.n(l),j=(t(56),t(21)),u=t(3),d=function(e){var n=e.link;return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[n.description," : (",n.url,")"]})})},b=t(77),m=t(80),p=Object(b.a)(a||(a=Object(j.a)(["\n  {\n    links {\n        id\n        url\n        description\n    }\n  }\n"]))),O=function(){var e=Object(m.a)(p).data;return Object(u.jsx)("div",{children:e&&Object(u.jsx)(u.Fragment,{children:e.links.map((function(e){return Object(u.jsx)(d,{link:e},e.id)}))})})},h=t(11),x=t(23),g=t(81),v=t(5),f=Object(b.a)(c||(c=Object(j.a)(["\n  mutation CreateLink(\n    $description: String!\n    $url: String!\n  ) {\n    createLink(description: $description, url: $url) {\n      id\n      url\n      description\n    }\n  }\n"]))),k=function(){var e=Object(v.f)(),n=Object(i.useState)({description:"",url:""}),t=Object(x.a)(n,2),a=t[0],c=t[1],r=Object(g.a)(f,{variables:{description:a.description,url:a.url},onCompleted:function(){return e.push("/")}}),s=Object(x.a)(r,1)[0];return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s()},children:[Object(u.jsxs)("div",{className:"flex flex-column mt3",children:[Object(u.jsx)("input",{className:"mb2",value:a.description,onChange:function(e){return c(Object(h.a)(Object(h.a)({},a),{},{description:e.target.value}))},type:"text",placeholder:"A description for the link"}),Object(u.jsx)("input",{className:"mb2",value:a.url,onChange:function(e){return c(Object(h.a)(Object(h.a)({},a),{},{url:e.target.value}))},type:"text",placeholder:"The URL for the link"})]}),Object(u.jsx)("button",{type:"submit",children:"Submit"})]})})},w=t(18),N="auth-token",S=function(){var e=Object(v.f)(),n=localStorage.getItem(N);return Object(u.jsxs)("div",{className:"flex pa1 justify-between nowrap orange",children:[Object(u.jsxs)("div",{className:"flex flex-fixed black",children:[Object(u.jsx)("div",{className:"fw7 mr1",children:"Hacker News"}),Object(u.jsx)(w.b,{to:"/",className:"ml1 no-underline black",children:"new"}),Object(u.jsx)("div",{className:"ml1",children:"|"}),Object(u.jsx)(w.b,{to:"/top",className:"ml1 no-underline black",children:"top"}),Object(u.jsx)("div",{className:"ml1",children:"|"}),Object(u.jsx)(w.b,{to:"/search",className:"ml1 no-underline black",children:"search"}),n&&Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)("div",{className:"ml1",children:"|"}),Object(u.jsx)(w.b,{to:"/create",className:"ml1 no-underline black",children:"submit"})]})]}),Object(u.jsx)("div",{className:"flex flex-fixed",children:n?Object(u.jsx)("div",{className:"ml1 pointer black",onClick:function(){localStorage.removeItem(N),e.push("/")},children:"logout"}):Object(u.jsx)(w.b,{to:"/login",className:"ml1 no-underline black",children:"login"})})]})},$=Object(b.a)(r||(r=Object(j.a)(["\n  mutation SignupMutation(\n    $email: String!\n    $password: String!\n    $name: String!\n  ) {\n    signup(\n      email: $email\n      password: $password\n      name: $name\n    ) {\n      token\n    }\n  }\n"]))),C=Object(b.a)(s||(s=Object(j.a)(["\n  mutation TokenAuth(\n    $username: String!\n    $password: String!\n  ) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n"]))),y=function(){var e=Object(v.f)(),n=Object(i.useState)({login:!0,email:"",password:"",name:""}),t=Object(x.a)(n,2),a=t[0],c=t[1],r=Object(g.a)(C,{variables:{username:a.email,password:a.password},onCompleted:function(n){var t=n.tokenAuth;console.log(t),localStorage.setItem(N,t.token),e.push("/")}}),s=Object(x.a)(r,1)[0],l=Object(g.a)($,{variables:{name:a.name,email:a.email,password:a.password},onCompleted:function(n){var t=n.signup;localStorage.setItem(N,t.token),e.push("/")}}),o=Object(x.a)(l,1)[0];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{className:"mv3",children:a.login?"Login":"Sign Up"}),Object(u.jsxs)("div",{className:"flex flex-column",children:[!a.login&&Object(u.jsx)("input",{value:a.name,onChange:function(e){return c(Object(h.a)(Object(h.a)({},a),{},{name:e.target.value}))},type:"text",placeholder:"Your name"}),Object(u.jsx)("input",{value:a.email,onChange:function(e){return c(Object(h.a)(Object(h.a)({},a),{},{email:e.target.value}))},type:"text",placeholder:"Your email address"}),Object(u.jsx)("input",{value:a.password,onChange:function(e){return c(Object(h.a)(Object(h.a)({},a),{},{password:e.target.value}))},type:"password",placeholder:"Choose a safe password"})]}),Object(u.jsxs)("div",{className:"flex mt3",children:[Object(u.jsx)("button",{className:"pointer mr2 button",onClick:a.login?s:o,children:a.login?"login":"create account"}),Object(u.jsx)("button",{className:"pointer button",onClick:function(e){return c(Object(h.a)(Object(h.a)({},a),{},{login:!a.login}))},children:a.login?"need to create an account?":"already have an account?"})]})]})},I=function(){return Object(u.jsxs)("div",{className:"center w85",children:[Object(u.jsx)(S,{}),Object(u.jsx)("div",{className:"ph3 pv1 background-gray",children:Object(u.jsxs)(v.c,{children:[Object(u.jsx)(v.a,{exact:!0,path:"/",component:O}),Object(u.jsx)(v.a,{exact:!0,path:"/create",component:k}),Object(u.jsx)(v.a,{exact:!0,path:"/login",component:y})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=t(47),L=t(78),B=t(79),J=t(76),T=Object(A.a)({uri:"http://35.232.232.192:8085/graphql/"}),U=new L.a({link:T,cache:new B.a});o.a.render(Object(u.jsxs)(w.a,{children:[Object(u.jsx)(J.a,{client:U,children:Object(u.jsx)(I,{})}),","]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.9d0fc3c5.chunk.js.map